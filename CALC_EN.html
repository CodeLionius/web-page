<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automation Efficiency Calculator</title>
    <style>
        :root {
            /* Modern color shades and gradients */
            --primary-color: #1a73e8; /* Softer blue */
            --primary-accent: #4285f4; /* Accent color */
            --secondary-color: #5f6368;
            --background-gradient-start: #f5f7fa;
            --background-gradient-end: #e4e7f1; /* Gentle gray gradient */
            --card-gradient-start: #ffffff;
            --card-gradient-end: #fafafa; /* Gentle white gradient for cards */
            --text-color: #202124;
            --label-color: #4d5156;
            --input-border: #dadce0;
            --input-focus-border: #1a73e8;
            --success-color: #0d652d; /* Darker green */
            --success-gradient-start: #e6f4ea;
            --success-gradient-end: #d1e7dd; /* Gentle green gradient for results */
            --font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            --border-radius: 12px;
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            --box-shadow-hover: 0 6px 16px rgba(0, 0, 0, 0.1);
            --transition-speed: 0.3s;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            /* Main page background gradient */
            background: linear-gradient(135deg, var(--background-gradient-start), var(--background-gradient-end));
            color: var(--text-color);
            margin: 0;
            padding: 2rem;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            /* Subtle raster effect */
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 0.5) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(255, 255, 255, 0.3) 0%, transparent 20%);
        }

        .container {
            width: 100%;
            max-width: 1200px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        @media (min-width: 992px) {
            .container {
                grid-template-columns: 1fr 1fr;
            }
        }

        h1, h2 {
            color: var(--primary-color);
            text-align: center;
            grid-column: 1 / -1;
            margin-bottom: 0;
            /* Animated title */
            animation: fadeInDown 0.8s ease-out;
        }

        h1 {
            margin-bottom: 2rem;
            font-size: 2rem;
        }

        h2 {
            margin-top: 0;
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .card {
            /* Gradient background for cards */
            background: linear-gradient(145deg, var(--card-gradient-start), var(--card-gradient-end));
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--box-shadow);
            height: fit-content;
            /* Animated card entry */
            animation: fadeInUp 0.6s ease-out;
            transition: transform var(--transition-speed), box-shadow var(--transition-speed);
        }

        /* Card animation on hover */
        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--box-shadow-hover);
        }

        /* Ensure the first card appears first */
        .card:nth-child(2) {
            animation-delay: 0.1s;
        }
        .card:nth-child(3) {
            animation-delay: 0.2s;
        }

        .input-grid, .results-grid {
            display: grid;
            gap: 1.5rem;
        }

        .input-group {
            position: relative;
        }

        .input-group label, .result-item-label > div:first-child {
            font-weight: 600;
            color: var(--label-color);
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .input-wrapper {
            display: flex;
            align-items: center;
        }

        .input-group input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--input-border);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
        }

        .input-group .unit {
            margin-left: 0.75rem;
            font-weight: 500;
            color: var(--secondary-color);
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--input-focus-border);
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.2);
        }

        .info-icon {
            margin-left: 8px;
            color: var(--secondary-color);
            cursor: help;
            font-style: normal;
            font-weight: bold;
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: transform var(--transition-speed);
        }

        /* Rotation animation for info icon */
        .info-icon:hover {
            transform: rotate(0deg);
        }

        .tooltip {
            visibility: hidden;
            width: 280px;
            background-color: #333;
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 10;
            bottom: 130%;
            left: 50%;
            transform: translateX(-50%) scale(0.9);
            opacity: 0;
            transition: opacity var(--transition-speed), transform var(--transition-speed);
            font-size: 0.85rem;
            font-weight: normal;
            line-height: 1.4;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .tooltip strong {
            display: block;
            margin-bottom: 5px;
            color: var(--primary-accent);
        }

        .tooltip::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }

        .info-icon:hover .tooltip {
            visibility: visible;
            opacity: 1;
            transform: translateX(-50%) scale(1);
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.2rem;
            /* Gradient for result items */
            background: linear-gradient(to right, var(--success-gradient-start), var(--success-gradient-end));
            border-left: 5px solid var(--success-color);
            border-radius: 8px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: transform var(--transition-speed), box-shadow var(--transition-speed);
        }

        /* Animation for result item on change */
        .result-item.updated {
             animation: pulse 0.5s ease-in-out;
        }

        .result-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .result-item-label {
            color: #333;
        }

        .result-item-label small {
            display: block;
            font-weight: 400;
            color: var(--secondary-color);
            margin-top: 4px;
            font-size: 0.85rem;
        }

        .result-item-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--success-color);
            white-space: nowrap;
            margin-left: 1rem;
            transition: all var(--transition-speed);
        }

        /* Animation definitions */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Automation Efficiency Calculator</h1>
        <div class="card">
            <h2>1. Initial Data</h2>
            <div class="input-grid">
                <!-- Hm -->
                <div class="input-group">
                    <label for="hm">
                        Hours saved per month
                        <span class="info-icon">ℹ️
                            <span class="tooltip"><strong>Description:</strong> Automation eliminates this many hours of human work each month.<br><br><strong>How to get:</strong> Record a video of the process: capture the time of one cycle × number of cycles per month. Multiply by 0.9–0.95 for error margin.</span>
                        </span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="hm" value="160">
                        <span class="unit">hrs.</span>
                    </div>
                </div>
                <!-- L -->
                <div class="input-group">
                    <label for="l">
                        Employee Load Factor
                        <span class="info-icon">ℹ️
                             <span class="tooltip"><strong>Description:</strong> A person actually works only a certain percentage of the total work time.<br><br><strong>How to get:</strong> The standard is 0.8: holidays, lunches, meetings, etc. Use the company's HR standard if available.</span>
                        </span>
                    </label>
                     <div class="input-wrapper">
                        <input type="number" id="l" value="80" min="0" max="100">
                        <span class="unit">%</span>
                    </div>
                </div>
                <!-- Ch -->
                <div class="input-group">
                    <label for="ch">
                        Full employee hourly cost
                        <span class="info-icon">ℹ️
                             <span class="tooltip"><strong>Description:</strong> This is how much one hour of such a specialist costs the company.<br><br><strong>How to get:</strong> Gross salary + taxes + bonuses + indirect costs (workplace, software) ÷ 168 hours.</span>
                        </span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="ch" value="500">
                        <span class="unit">€/hr.</span>
                    </div>
                </div>
                <!-- Sm -->
                <div class="input-group">
                    <label for="sm">
                        Other monetary benefit per month
                        <span class="info-icon">ℹ️
                             <span class="tooltip"><strong>Description:</strong> Additional effect besides the saved salary fund.<br><br><strong>How to get:</strong> Fines "before automation" minus "after"; revenue growth due to faster order processing; new tasks for the freed-up employee.</span>
                        </span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="sm" value="15000">
                         <span class="unit">€/mo.</span>
                    </div>
                </div>
                <!-- Om -->
                <div class="input-group">
                    <label for="om">
                        Monthly operational costs
                         <span class="info-icon">ℹ️
                             <span class="tooltip"><strong>Description:</strong> Costs required for the solution to operate.<br><br><strong>How to get:</strong> VPS, domain, backups, support.</span>
                        </span>
                    </label>
                     <div class="input-wrapper">
                        <input type="number" id="om" value="25000">
                        <span class="unit">€/mo.</span>
                    </div>
                </div>
                <!-- I0 -->
                <div class="input-group">
                    <label for="i0">
                        One-time implementation budget
                         <span class="info-icon">ℹ️
                             <span class="tooltip"><strong>Description:</strong> One-time investments paid once.<br><br><strong>How to get:</strong> Process audit + development + training + launch. Fixed in the commercial offer.</span>
                        </span>
                    </label>
                     <div class="input-wrapper">
                        <input type="number" id="i0" value="500000">
                        <span class="unit">€</span>
                    </div>
                </div>
                <!-- n -->
                <div class="input-group">
                    <label for="n">
                        Evaluation horizon
                        <span class="info-icon">ℹ️
                             <span class="tooltip"><strong>Description:</strong> The period over which the effect is calculated.<br><br><strong>How to get:</strong> Usually 12 or 24. We take the period for which the budget was approved.</span>
                        </span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="n" value="12">
                        <span class="unit">mo.</span>
                    </div>
                </div>
                <!-- r -->
                <div class="input-group">
                    <label for="r">
                        Annual discount rate (NPV)
                         <span class="info-icon">ℹ️
                             <span class="tooltip"><strong>Description:</strong> The rate used to calculate the net present value (NPV), taking into account the depreciation of money in the future.</span>
                        </span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="r" value="20">
                        <span class="unit">%</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <h2>2. Calculated Results</h2>
            <div class="results-grid">
                <!-- FTE -->
                <div class="result-item">
                    <div class="result-item-label">
                        <div>
                            FTE
                            <span class="info-icon">ℹ️
                                <span class="tooltip"><strong>Description:</strong> Shows how many employee positions can be freed up or redistributed. For example, 0.5 FTE means that half of one employee's working time is freed up daily.</span>
                            </span>
                        </div>
                        <small>Number of FTEs freed up</small>
                    </div>
                    <div class="result-item-value" id="fte_result">1.19</div>
                </div>
                <!-- B_m -->
                <div class="result-item">
                    <div class="result-item-label">
                        <div>
                            Monthly net benefit
                             <span class="info-icon">ℹ️
                                <span class="tooltip"><strong>Description:</strong> The cash flow that actually remains in the company after automation each month, minus all operational costs.</span>
                            </span>
                        </div>
                        <small>Cash flow each month</small>
                    </div>
                    <div class="result-item-value" id="bm_result">70 000 €</div>
                </div>
                <!-- ROI_n -->
                <div class="result-item">
                    <div class="result-item-label">
                        <div>
                            Return on Investment (ROI)
                             <span class="info-icon">ℹ️
                                <span class="tooltip"><strong>Description:</strong> Shows how much profit each invested euro brings over the entire evaluation period. An indicator above 0% means the project is profitable.</span>
                            </span>
                        </div>
                        <small>Profit over the entire period</small>
                    </div>
                    <div class="result-item-value" id="roi_result">68.0%</div>
                </div>
                 <!-- Payback -->
                <div class="result-item">
                    <div class="result-item-label">
                        <div>
                           Payback period
                             <span class="info-icon">ℹ️
                                <span class="tooltip"><strong>Description:</strong> In how many months the generated benefit will cover the initial investment. The lower this number, the faster the project pays for itself.</span>
                            </span>
                        </div>
                        <small>In how many months the investment will return</small>
                    </div>
                    <div class="result-item-value" id="payback_result">7.1 mo.</div>
                </div>
                 <!-- TCO_n -->
                <div class="result-item">
                    <div class="result-item-label">
                        <div>
                           Total Cost of Ownership (TCO)
                             <span class="info-icon">ℹ️
                                <span class="tooltip"><strong>Description:</strong> The total amount the company will spend on the project over the entire evaluation period, including the initial investment and all monthly costs.</span>
                            </span>
                        </div>
                        <small>Total costs over the horizon</small>
                    </div>
                    <div class="result-item-value" id="tco_result">800 000 €</div>
                </div>
                <!-- NPV -->
                <div class="result-item">
                    <div class="result-item-label">
                        <div>
                           Net Present Value (NPV)
                             <span class="info-icon">ℹ️
                                <span class="tooltip"><strong>Description:</strong> The value of future cash flows today, taking into account the time value of money (discount rate). If NPV > 0, the project creates financial value.</span>
                            </span>
                        </div>
                        <small>Project value today</small>
                    </div>
                    <div class="result-item-value" id="npv_result">104 883 €</div>
                </div>
                <!-- IRR -->
                <div class="result-item">
                    <div class="result-item-label">
                        <div>
                           Internal Rate of Return (IRR)
                             <span class="info-icon">ℹ️
                                <span class="tooltip"><strong>Description:</strong> The discount rate at which the project's NPV is zero. This shows the actual annual return of the project. If the IRR is higher than the company's required rate of return, the project is acceptable.</span>
                            </span>
                        </div>
                        <small>Annual project return</small>
                    </div>
                    <div class="result-item-value" id="irr_result">9.0%</div>
                </div>
            </div>
        </div>
    </div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const inputs = [
            'hm', 'l', 'ch', 'sm', 'om', 'i0', 'n', 'r'
        ];
        const inputElements = inputs.map(id => document.getElementById(id));
        const resultItems = document.querySelectorAll('.result-item');
        const formatCurrency = (value) => {
             if (isNaN(value) || !isFinite(value)) return "N/A";
             const formatted = new Intl.NumberFormat('en-US', {
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(value);
             return `${formatted} €`;
        };

        // Use debounce to reduce the frequency of calculations
        let debounceTimer;
        const calculateDebounced = () => {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(calculate, 300); // 300ms delay
        };

        const calculate = () => {
            // 1. Get values from input fields
            const hm = parseFloat(document.getElementById('hm').value) || 0;
            const l_raw = parseFloat(document.getElementById('l').value) || 0;
            const l = l_raw > 0 ? l_raw / 100 : 0; // Prevention of division by zero
            const ch = parseFloat(document.getElementById('ch').value) || 0;
            const sm = parseFloat(document.getElementById('sm').value) || 0;
            const om = parseFloat(document.getElementById('om').value) || 0;
            const i0 = parseFloat(document.getElementById('i0').value) || 0;
            const n = parseInt(document.getElementById('n').value) || 0;
            const r_raw = parseFloat(document.getElementById('r').value) || 0;
            const r = r_raw >= 0 ? r_raw / 100 : 0; // Handle negative values

            // 2. Perform calculations
            // FTE
            const fte = (l > 0) ? hm / (168 * l) : 0;
            // B_m (Monthly benefit)
            const bm = hm * ch + sm - om;
            // ROI_n
            const roi = (i0 > 0) ? ((bm * n - i0) / i0) * 100 : 0;
            // Payback
            const payback = (bm > 0) ? i0 / bm : 0;
            // TCO_n
            const tco = i0 + (om * n);
            // NPV
            let npv = 0;
            const monthlyRate = r / 12;
            if (monthlyRate >= 0 && n > 0) {
                 if (monthlyRate > 0) {
                    for (let i = 1; i <= n; i++) {
                        npv += bm / Math.pow(1 + monthlyRate, i);
                    }
                } else { // If interest is 0, just sum up
                    npv = bm * n;
                }
            }
            npv -= i0;
            // IRR (simplified iterative method)
            let irr = 0;
            if (bm > 0 && i0 > 0) {
                let high = 1; // 100%
                let low = 0;
                let guess = 0.5;
                for (let i = 0; i < 30; i++) { // 30 iterations for sufficient accuracy
                    let tempNpv = 0;
                    let monthlyGuess = guess / 12;
                    for (let j = 1; j <= n; j++) {
                        tempNpv += bm / Math.pow(1 + monthlyGuess, j);
                    }
                    tempNpv -= i0;
                    if (tempNpv > 0) {
                        low = guess;
                    } else {
                        high = guess;
                    }
                    guess = (low + high) / 2;
                }
                irr = guess * 100;
            } else if (bm <=0 && i0 > 0) {
                 irr = -100; // Negative return
            }

            // 3. Update results in HTML with animation
            const updateResult = (elementId, value) => {
                const element = document.getElementById(elementId);
                const parentItem = element.closest('.result-item');
                // Add animation class
                parentItem.classList.remove('updated');
                // Force redraw
                void parentItem.offsetWidth; 
                parentItem.classList.add('updated');
                
                element.textContent = value;
            };

            updateResult('fte_result', fte.toFixed(2));
            updateResult('bm_result', formatCurrency(bm));
            updateResult('roi_result', `${roi.toFixed(1)}%`);
            updateResult('payback_result', payback > 0 ? `${payback.toFixed(1)} mo.` : "N/A");
            updateResult('tco_result', formatCurrency(tco));
            updateResult('npv_result', formatCurrency(npv));
            updateResult('irr_result', `${irr.toFixed(1)}%`);
        };

        // Add 'input' event listener to each field with debounce
        inputElements.forEach(input => {
            input.addEventListener('input', calculateDebounced);
        });

        // Run the calculation for the first time when the page loads
        calculate();
    });
</script>
</body>
</html>