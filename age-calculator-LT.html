<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AmÅ¾iaus SkaiÄiuoklÄ—</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f4f7f6;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }
        .container {
            background: #fff;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 500px;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 1.5rem;
        }
        .form-group {
            margin-bottom: 1rem;
        }
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #555;
        }
        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 1rem;
        }
        .date-inputs {
            display: flex;
            gap: 1rem;
        }
        .date-inputs .form-group {
            flex: 1;
        }
        button {
            width: 100%;
            padding: 0.85rem;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #2980b9;
        }
        #result {
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 2px solid #eee;
        }
        .error {
            color: #e74c3c;
            font-size: 0.9rem;
            margin-top: 0.25rem;
        }
        .result-section {
            background-color: #ecf0f1;
            padding: 1rem;
            border-radius: 5px;
            margin-bottom: 1rem;
        }
        .result-section h2 {
            margin-top: 0;
            font-size: 1.2rem;
            color: #2c3e50;
            border-bottom: 1px solid #bdc3c7;
            padding-bottom: 0.5rem;
        }
        .result-section p {
            margin: 0.5rem 0;
        }
        .highlight {
            color: #3498db;
            font-weight: bold;
        }
        .birthday-note {
            text-align: center;
            font-size: 1.2rem;
            color: #27ae60;
            font-weight: bold;
            margin-top: 1rem;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>ğŸ‚ AmÅ¾iaus SkaiÄiuoklÄ— ğŸ‚</h1>
        <p>Ä®veskite savo vardÄ… ir gimimo datÄ…, kad suÅ¾inotumÄ—te savo amÅ¾iÅ³, zodiako Å¾enklÄ… ir kitÄ… Ä¯domiÄ… informacijÄ…!</p>
        <form id="age-form">
            <div class="form-group">
                <label for="name">Vardas</label>
                <input type="text" id="name" required>
                <div class="error" id="name-error"></div>
            </div>
            <div class="date-inputs">
                <div class="form-group">
                    <label for="year">Metai</label>
                    <input type="number" id="year" placeholder="YYYY" required>
                </div>
                <div class="form-group">
                    <label for="month">MÄ—nuo</label>
                    <input type="number" id="month" placeholder="MM" required>
                </div>
                <div class="form-group">
                    <label for="day">Diena</label>
                    <input type="number" id="day" placeholder="DD" required>
                </div>
            </div>
            <div class="error" id="date-error"></div>
            <button type="submit">ApskaiÄiuoti</button>
        </form>
        <div id="result"></div>
    </div>

    <script>
        document.getElementById('age-form').addEventListener('submit', function(event) {
            event.preventDefault();
            
            // Clear previous results and errors
            document.getElementById('result').innerHTML = '';
            document.getElementById('name-error').textContent = '';
            document.getElementById('date-error').textContent = '';

            // Get inputs
            const name = document.getElementById('name').value;
            const year = parseInt(document.getElementById('year').value, 10);
            const month = parseInt(document.getElementById('month').value, 10);
            const day = parseInt(document.getElementById('day').value, 10);

            // --- Validation ---
            let isValid = true;
            if (!/^[a-zA-ZÄ…ÄÄ™Ä—Ä¯Å¡Å³Å«Å¾Ä„ÄŒÄ˜Ä–Ä®Å Å²ÅªÅ½\s'-]+$/.test(name) || name.length > 50) {
                document.getElementById('name-error').textContent = 'Vardo reikÅ¡mÄ— turÄ—tÅ³ turÄ—ti tik raides, tarpus ar brÅ«kÅ¡nelius (iki 50 simboliÅ³).';
                isValid = false;
            }

            const currentYear = new Date().getFullYear();
            if (isNaN(year) || year < 1900 || year > currentYear) {
                document.getElementById('date-error').textContent = `MetÅ³ reikÅ¡mÄ— turi bÅ«ti skaiÄius tarp 1900 ir ${currentYear}.`;
                isValid = false;
            }
            if (isNaN(month) || month < 1 || month > 12) {
                document.getElementById('date-error').textContent = 'MÄ—nuo turi bÅ«ti tarp 1 ir 12.';
                isValid = false;
            }

            const daysInMonth = getDaysInMonth(year, month);
            if (isNaN(day) || day < 1 || day > daysInMonth) {
                document.getElementById('date-error').textContent = `Diena turi bÅ«ti tarp 1 ir ${daysInMonth}.`;
                isValid = false;
            }

            const birthDate = new Date(year, month - 1, day);
            const today = new Date();
            today.setHours(0, 0, 0, 0); // Normalize today's date
            if (birthDate > today) {
                document.getElementById('date-error').textContent = 'Gimimo data negali bÅ«ti ateityje.';
                isValid = false;
            }

            if (!isValid) return;

            // --- Calculations ---
            const ageInfo = calculateAge(birthDate, today);
            const nextBirthdayInfo = calculateNextBirthday(birthDate, today);
            const zodiacSign = getZodiacSign(birthDate);
            const chineseZodiacSign = getChineseZodiacSign(year);

            // --- Display Results ---
            displayResults(name, birthDate, ageInfo, nextBirthdayInfo, zodiacSign, chineseZodiacSign);
        });

        function isLeapYear(year) {
            return (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);
        }

        function getDaysInMonth(year, month) {
            // month is 1-based. new Date() month is 0-based, so new Date(year, month, 0) gives the last day of the PREVIOUS month.
            // This is what we want for validation. For March (3), new Date(year, 3, 0) gives last day of Feb. This is wrong.
            // Correct way: new Date(year, month, 0) gives the last day of the month *before* `month`.
            return new Date(year, month, 0).getDate();
        }

        function calculateAge(birthDate, today) {
            let years = today.getFullYear() - birthDate.getFullYear();
            let months = today.getMonth() - birthDate.getMonth();
            let days = today.getDate() - birthDate.getDate();

            if (days < 0) {
                months--;
                // today.getMonth() is 0-indexed. For March, it's 2. We need days in previous month (Feb).
                // getDaysInMonth(year, 2) will correctly return days in Feb.
                days += getDaysInMonth(today.getFullYear(), today.getMonth());
            }

            if (months < 0) {
                years--;
                months += 12;
            }
            
            const totalDays = Math.floor((today - birthDate) / (1000 * 60 * 60 * 24));
            const totalWeeks = Math.floor(totalDays / 7);
            const totalMonths = years * 12 + months;

            return { years, months, days, totalDays, totalWeeks, totalMonths };
        }

        function calculateNextBirthday(birthDate, today) {
            const currentYear = today.getFullYear();
            let nextBirthday = new Date(currentYear, birthDate.getMonth(), birthDate.getDate());

            if (nextBirthday < today) {
                nextBirthday.setFullYear(currentYear + 1);
            }
            
            // Handle leap day birthdays
            if (birthDate.getMonth() === 1 && birthDate.getDate() === 29 && !isLeapYear(nextBirthday.getFullYear())) {
                 nextBirthday.setDate(28);
            }

            const daysToBirthday = Math.ceil((nextBirthday - today) / (1000 * 60 * 60 * 24));
            return { daysToBirthday, nextBirthdayDate: nextBirthday };
        }

        function getZodiacSign(birthDate) {
            const day = birthDate.getDate();
            const month = birthDate.getMonth() + 1;
            if ((month == 1 && day >= 20) || (month == 2 && day <= 18)) return "Vandenis â™’ï¸";
            if ((month == 2 && day >= 19) || (month == 3 && day <= 20)) return "Å½uvys â™“ï¸";
            if ((month == 3 && day >= 21) || (month == 4 && day <= 19)) return "Avinas â™ˆï¸";
            if ((month == 4 && day >= 20) || (month == 5 && day <= 20)) return "Jautis â™‰ï¸";
            if ((month == 5 && day >= 21) || (month == 6 && day <= 20)) return "Dvyniai â™Šï¸";
            if ((month == 6 && day >= 21) || (month == 7 && day <= 22)) return "VÄ—Å¾ys â™‹ï¸";
            if ((month == 7 && day >= 23) || (month == 8 && day <= 22)) return "LiÅ«tas â™Œï¸";
            if ((month == 8 && day >= 23) || (month == 9 && day <= 22)) return "MergelÄ— â™ï¸";
            if ((month == 9 && day >= 23) || (month == 10 && day <= 22)) return "SvarstyklÄ—s â™ï¸";
            if ((month == 10 && day >= 23) || (month == 11 && day <= 21)) return "Skorpionas â™ï¸";
            if ((month == 11 && day >= 22) || (month == 12 && day <= 21)) return "Å aulys â™ï¸";
            if ((month == 12 && day >= 22) || (month == 1 && day <= 19)) return "OÅ¾iaragis â™‘ï¸";
            return "Nenustatytas";
        }

        function getChineseZodiacSign(year) {
            const signs = ["Å½iurkÄ— ğŸ€", "Jautis ğŸ‚", "Tigras ğŸ…", "KiÅ¡kis ğŸ‡", "Drakonas ğŸ‰", "GyvatÄ— ğŸ", "Arklys ğŸ", "OÅ¾ka ğŸ", "BeÅ¾dÅ¾ionÄ— ğŸ’", "Gaidys ğŸ“", "Å uo ğŸ•", "KiaulÄ— ğŸ–"];
            return signs[(year - 4) % 12];
        }

        function getWeekNumber(d) {
            d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
            d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay()||7));
            var yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));
            var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7);
            return weekNo;
        }

        /**
         * Returns the correct Lithuanian declension for a given number.
         * @param {number} number The number to check.
         * @param {string} one Singular form (e.g., 'diena').
         * @param {string} few Plural form for 2-9 (e.g., 'dienos').
         * @param {string} many Genitive plural form for 0, 10-19 (e.g., 'dienÅ³').
         * @returns {string} The correctly declined word.
         */
        function getDeclension(number, one, few, many) {
            const lastDigit = number % 10;
            const lastTwoDigits = number % 100;

            if (lastTwoDigits >= 11 && lastTwoDigits <= 19) {
                return many;
            }
            if (lastDigit === 1) {
                return one;
            }
            if (lastDigit >= 2 && lastDigit <= 9) {
                return few;
            }
            return many;
        }

        function displayResults(name, birthDate, ageInfo, nextBirthdayInfo, zodiacSign, chineseZodiacSign) {
            const resultDiv = document.getElementById('result');
            
            const lithuanianMonths = ["sausio", "vasario", "kovo", "balandÅ¾io", "geguÅ¾Ä—s", "birÅ¾elio", "liepos", "rugpjÅ«Äio", "rugsÄ—jo", "spalio", "lapkriÄio", "gruodÅ¾io"];
            const lithuanianWeekdays = ["sekmadienis", "pirmadienis", "antradienis", "treÄiadienis", "ketvirtadienis", "penktadienis", "Å¡eÅ¡tadienis"];

            const birthDateStr = `${birthDate.getFullYear()} m. ${lithuanianMonths[birthDate.getMonth()]} ${birthDate.getDate()} d., ${lithuanianWeekdays[birthDate.getDay()]}`;
            const dayOfYear = Math.floor((birthDate - new Date(birthDate.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            const weekOfYear = getWeekNumber(birthDate);

            const yearsStr = getDeclension(ageInfo.years, 'metai', 'metai', 'metÅ³');
            const monthsStr = getDeclension(ageInfo.months, 'mÄ—nuo', 'mÄ—nesiai', 'mÄ—nesiÅ³');
            const daysStr = getDeclension(ageInfo.days, 'diena', 'dienos', 'dienÅ³');

            let resultHTML = `
                <div class="result-section">
                    <h2>Sveiki, ${name.charAt(0).toUpperCase() + name.slice(1)}!</h2>
                    <p><strong>ğŸ“… Gimimo data:</strong> ${birthDateStr}</p>
                    <p><strong>ğŸŒŸ Zodiako Å¾enklas:</strong> ${zodiacSign}</p>
                    <p><strong>ğŸ‰ KinÅ³ Zodiako Å¾enklas:</strong> ${chineseZodiacSign}</p>
                    <p><strong>ğŸ“Š MetÅ³ diena:</strong> ${dayOfYear}</p>
                    <p><strong>ğŸ—“ï¸ MetÅ³ savaitÄ—:</strong> ${weekOfYear}</p>
                    ${(birthDate.getMonth() === 1 && birthDate.getDate() === 29) ? '<p class="highlight">ğŸˆ GimÄ—te keliamÅ³jÅ³ metÅ³ dienÄ…! ğŸˆ</p>' : ''}
                </div>

                <div class="result-section">
                    <h2>â³ Dabartinis amÅ¾ius</h2>
                    <p class="highlight">${ageInfo.years} ${yearsStr}, ${ageInfo.months} ${monthsStr} ir ${ageInfo.days} ${daysStr}</p>
                </div>

                <div class="result-section">
                    <h2>ğŸ“Š AmÅ¾iaus statistika</h2>
                    <p><strong>IÅ¡ viso mÄ—nesiÅ³:</strong> ${ageInfo.totalMonths.toLocaleString('lt-LT')}</p>
                    <p><strong>IÅ¡ viso savaiÄiÅ³:</strong> ${ageInfo.totalWeeks.toLocaleString('lt-LT')}</p>
                    <p><strong>IÅ¡ viso dienÅ³:</strong> ${ageInfo.totalDays.toLocaleString('lt-LT')}</p>
                </div>
            `;

            if (nextBirthdayInfo.daysToBirthday === 0 || nextBirthdayInfo.daysToBirthday === 365 || nextBirthdayInfo.daysToBirthday === 366) {
                 resultHTML += `<div class="birthday-note">ğŸ‰ Su gimtadieniu! Å iandien jÅ«sÅ³ ypatinga diena! ğŸ‰</div>`;
            } else {
                const nextBirthdayDate = nextBirthdayInfo.nextBirthdayDate;
                const nextBirthdayStr = `${nextBirthdayDate.getFullYear()} m. ${lithuanianMonths[nextBirthdayDate.getMonth()]} ${nextBirthdayDate.getDate()} d. (${lithuanianWeekdays[nextBirthdayDate.getDay()]})`;
                const daysToBirthdayStr = getDeclension(nextBirthdayInfo.daysToBirthday, 'diena', 'dienos', 'dienÅ³');

                resultHTML += `
                    <div class="result-section">
                        <h2>ğŸ‰ Kitas gimtadienis</h2>
                        <p><strong>Data:</strong> ${nextBirthdayStr}</p>
                        <p><strong>â° Iki kito gimtadienio liko ${nextBirthdayInfo.daysToBirthday} ${daysToBirthdayStr}</strong></p>
                        ${(birthDate.getMonth() === 1 && birthDate.getDate() === 29 && !isLeapYear(nextBirthdayDate.getFullYear())) ? '<p><small>(Å vÄ™sime vasario 28 d., ne keliamaisiais metais)</small></p>' : ''}
                    </div>
                `;
            }

            resultDiv.innerHTML = resultHTML;
        }
    </script>

</body>
</html>